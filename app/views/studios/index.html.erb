<div class="banner-small mb-5" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80);">
  <div class="container">
    <h1>Index !</h1>
    <p>Music studios</p>
    <%= link_to 'Add your music studio', new_studio_path, class:"linkto btn btn-transparent"  %>
  </div>
</div>


<div class="container">

  <div class="cards-grid">
    <% @studios.each do |studio| %>
      <%= link_to studio_path(studio), class:"link-without-style" do  %>
        <% if studio.photo_url.nil? && studio.photos.attached? %>
          <% url = cl_image_path studio.photos.first.key %>
        <% elsif studio.photo_url.nil? && !studio.photos.attached? %>
          <% url = "https://images.unsplash.com/photo-1560844915-bb3189e146ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1863&q=80"%>
        <% else  %>
          <img src= "<%=studio.photo_url%>"/>
        <% end %>
        <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= url %>)">
          <h2 class="title-studio-card" > <%= studio.title %> </h2>
          <p class="card-studio-description"> <%= studio.description %> </p>
        </div>
      <% end %>
    <% end %>


<%# ------------------------------- GEOCODER -------------------------------- %>
  <div style="width: 100%; height: 600px;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @markers.to_json %>"
    data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
