<div class="banner-small mb-5" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.ctfassets.net/anpxw7hl9rcg/6i3V4opLFffyrrG6WoCYsP/f9fdb70e292ce2969d8021a0632afb82/_10_gargolandia.jpg);">
  <div class="container">
    <h1><%= @studio.title %></h1>
    <h1>Owner: <%= @studio.user.nickname %></h1>
    <img class="avatar-show" src="<%=@studio.user.photo_id_url%>" alt="">
    <%= link_to 'Visit Profil', profile_path(@studio.user.id), class:"btn btn-blue" %>
  </div>
</div>

<%# --------- SEULEMENT LE PROPRIETAIRE DU STUDIO VOIT LES BOOKINGS --------- %>
<%if  @studio.user == current_user %>
  <% @studio.bookings.each do |booking| %>
    <div class="card-booking">
      <h3 style="color:black;"> You have a booking from <%= booking.user.nickname %></h3>
    </div>
  <% end%>

<%end %>


<div class="studioinfos">
  <h2 class="d-flex justify-content-center"> <strong> <%= @studio.title %></strong></h2>
  <p class="d-flex justify-content-center mt-3"> <%= @studio.description %></p>
</div>

<%# ------------------------- CAROUSEL PHOTOS STUDIO ------------------------ %>
<% if @studio.photos.length > 1%>
  <div class="carouselle d-flex justify-content-center">
    <div id="carouselExampleIndicators" class="carousel slide input-group w-50" data-bs-ride="carousel">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        <% @studio.photos.each do |photo| %>
            <div class="carousel-item <%= 'active' if @studio.photos.index(photo) == 0 %>">
              <%= cl_image_tag photo.key, class: 'w-100' %>
            </div>
          <% end %>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
<%end %>

<%# --------------------------- FORM BOOKING STUDIO ------------------------ %>
<div class="container mt-5">
    <h2 class="text-center">Book a session </h2>
    <%= simple_form_for [@studio, @booking] do |f| %>
      <%= f.input :start_date %>
      <%= f.input :end_date %>
      <%= f.submit class:"btn btn-primary mt-2 d-grid gap-2 col-6 mx-auto" %>
    <% end %>
  </div>


<div class="basdepage mt-5">
  <p> Back
    <%= link_to studios_path, class: "text-warning" do %>
    <i class="fas fa-undo"></i>
    <% end %>
  </p>


  <% if policy(@studio).edit? %>
    <%= link_to 'edit studio', edit_studio_path(@studio), class:"btn btn-primary mb-3" %>
  <% end %>
  <% if policy(@studio).destroy? %>
    <%= link_to 'delete studio', studio_path(@studio), class:"btn btn-warning",
    method: :delete, data: { confirm: "Are you sure?" } %>
  <% end %>
</div>
